{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thera\\\\Desktop\\\\React\\\\crud\\\\src\\\\components\\\\Products\\\\index.js\";\nimport React, { Component } from 'react'; //import PubSub from 'pubsub-js';\n\nimport { Table, Button, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\n\nclass FormProduct extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      model: {\n        id: 0,\n        description: '',\n        price: 0,\n        quantity: 0\n      }\n    };\n\n    this.setValues = (e, field) => {\n      const {\n        model\n      } = this.state;\n      model[field] = e.target.value;\n      this.setState({\n        model\n      });\n    };\n\n    this.create = () => {\n      this.setState({\n        model: {\n          id: 0,\n          description: '',\n          price: 0,\n          quantity: 0\n        }\n      });\n      this.props.productCreate(this.state.model);\n    };\n  }\n\n  componentWillMount() {\n    PubSub.subscribe('edit-product', (topic, product) => {\n      this.setState({\n        model: product\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }\n    }, \"Descri\\xE7\\xE3o:\"), /*#__PURE__*/React.createElement(Input, {\n      id: \"description\",\n      type: \"text\",\n      value: this.state.model.description,\n      placeholder: \"Description Product...\",\n      onChange: e => this.setValues(e, 'description'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 29\n      }\n    }, \"Pre\\xE7o:\"), /*#__PURE__*/React.createElement(Input, {\n      id: \"price\",\n      type: \"text\",\n      value: this.state.model.price,\n      placeholder: \"R$ \",\n      onChange: e => this.setValues(e, 'price'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"quantity\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }\n    }, \"Quantidade:\"), /*#__PURE__*/React.createElement(Input, {\n      id: \"quantity\",\n      type: \"text\",\n      value: this.state.model.quantity,\n      placeholder: \"Products\",\n      onChange: e => this.setValues(e, 'quantity'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      block: true,\n      onClick: this.create,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, \" Gravar \"));\n  }\n\n}\n\nclass ListProduct extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.delete = id => {\n      this.props.deleteProduct(id);\n    };\n\n    this.onEdit = product => {\n      PubSub.publish('edit-product', product);\n    };\n  }\n\n  render() {\n    const {\n      products\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Table, {\n      className: \"table-bordered text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }, \"Descri\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, \"Pre\\xE7o\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }\n    }, \"Qtde.\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }\n    }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, products.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n      key: product.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 33\n      }\n    }, product.description), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 33\n      }\n    }, product.price), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 33\n      }\n    }, product.quantity), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"info\",\n      size: \"sm\",\n      onClick: e => this.onEdit(product),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 37\n      }\n    }, \"Editar\"), /*#__PURE__*/React.createElement(Button, {\n      color: \"danger\",\n      size: \"sm\",\n      onClick: e => this.delete(product.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 37\n      }\n    }, \"Deletar\"))))));\n  }\n\n}\n\nexport default class ProductBox extends Component {\n  constructor(...args) {\n    super(...args);\n    this.Url = 'http://localhost:9000/products';\n    this.state = {\n      products: [],\n      message: {\n        text: '',\n        alert: ''\n      }\n    };\n\n    this.save = product => {\n      let data = {\n        id: parseInt(product.id),\n        description: product.description,\n        price: parseFloat(product.price),\n        quantity: parseInt(product.quantity)\n      };\n      console.log(data);\n      const requestInfo = {\n        method: data.id !== 0 ? 'PUT' : 'POST',\n        body: JSON.stringify(data),\n        headers: new Headers({\n          'Content-type': 'application/json'\n        })\n      };\n\n      if (data.id === 0) {\n        // CREATE NEW PRODUCT\n        fetch(this.Url, requestInfo).then(response => response.json()).then(newProduct => {\n          let {\n            products\n          } = this.state;\n          products.push(newProduct);\n          this.setState({\n            products,\n            message: {\n              text: 'new product!',\n              alert: 'success'\n            }\n          });\n          this.timerMessage(3000);\n        }).catch(e => console.log(e));\n      } else {\n        // EDIT PRODUCT\n        fetch(`${this.Url}/${data.id}`, requestInfo).then(response => response.json()).then(updatedProduct => {\n          let {\n            products\n          } = this.state;\n          let position = products.findIndex(product => product.id === data.id);\n          products[position] = updatedProduct;\n          this.setState({\n            products,\n            message: {\n              text: 'Product success!',\n              alert: 'info'\n            }\n          });\n          this.timerMessage(3000);\n        }).catch(e => console.log(e));\n      }\n    };\n\n    this.delete = id => {\n      fetch(`${this.Url}/${id}`, {\n        method: 'DELETE'\n      }).then(response => response.json()).then(rows => {\n        const products = this.state.products.filter(product => product.id !== id);\n        this.setState({\n          products,\n          message: {\n            text: 'Product delete.',\n            alert: 'danger'\n          }\n        });\n        this.timerMessage(3000);\n      }).catch(e => console.log(e));\n    };\n\n    this.timerMessage = duration => {\n      setTimeout(() => {\n        this.setState({\n          message: {\n            text: '',\n            alert: ''\n          }\n        });\n      }, duration);\n    };\n  }\n\n  componentDidMount() {\n    fetch(this.Url).then(response => response.json()).then(products => this.setState({\n      products\n    })).catch(e => console.log(e));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, this.state.message.text !== '' ? /*#__PURE__*/React.createElement(Alert, {\n      color: this.state.message.alert,\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 25\n      }\n    }, \" \", this.state.message.text, \" \") : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"font-weight-bold text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 25\n      }\n    }, \" Cadastro de Produtos \"), /*#__PURE__*/React.createElement(FormProduct, {\n      productCreate: this.save,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"font-weight-bold text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 25\n      }\n    }, \" Lista de Produtos \"), /*#__PURE__*/React.createElement(ListProduct, {\n      products: this.state.products,\n      deleteProduct: this.delete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/thera/Desktop/React/crud/src/components/Products/index.js"],"names":["React","Component","Table","Button","Form","FormGroup","Label","Input","Alert","FormProduct","state","model","id","description","price","quantity","setValues","e","field","target","value","setState","create","props","productCreate","componentWillMount","PubSub","subscribe","topic","product","render","ListProduct","delete","deleteProduct","onEdit","publish","products","map","ProductBox","Url","message","text","alert","save","data","parseInt","parseFloat","console","log","requestInfo","method","body","JSON","stringify","headers","Headers","fetch","then","response","json","newProduct","push","timerMessage","catch","updatedProduct","position","findIndex","rows","filter","duration","setTimeout","componentDidMount"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\n\r\n//import PubSub from 'pubsub-js';\r\n\r\nimport { \r\n    Table, \r\n    Button,\r\n    Form,\r\n    FormGroup,\r\n    Label,\r\n    Input,\r\n    Alert\r\n} from 'reactstrap';\r\n\r\nclass FormProduct extends Component {\r\n\r\n    state = { \r\n        model: { \r\n            id: 0, \r\n            description: '',\r\n            price: 0, \r\n            quantity: 0 \r\n        } \r\n    };\r\n\r\n    setValues = (e, field) => {\r\n        const { model } = this.state;\r\n        model[field] = e.target.value;\r\n        this.setState({ model });\r\n    }\r\n\r\n    create = () => {\r\n        this.setState({ model: { id: 0,  description: '', price: 0, quantity: 0 } })\r\n        this.props.productCreate(this.state.model);\r\n    }\r\n\r\n    componentWillMount() {\r\n        PubSub.subscribe('edit-product', (topic, product) => {\r\n            this.setState({ model: product });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Form>\r\n                <FormGroup>\r\n                    <Label for=\"description\">Descrição:</Label>\r\n                    <Input id=\"description\" type=\"text\" value={this.state.model.description} placeholder=\"Description Product...\"\r\n                    onChange={e => this.setValues(e, 'description') } />\r\n                </FormGroup>\r\n                <FormGroup>\r\n                    <div className=\"form-row\">\r\n                        <div className=\"col-md-6\">\r\n                            <Label for=\"price\">Preço:</Label>\r\n                            <Input id=\"price\" type=\"text\"  value={this.state.model.price} placeholder=\"R$ \" \r\n                            onChange={e => this.setValues(e, 'price') } />\r\n                        </div>\r\n                        <div className=\"col-md-6\">\r\n                            <Label for=\"quantity\">Quantidade:</Label>\r\n                            <Input id=\"quantity\" type=\"text\" value={this.state.model.quantity} placeholder=\"Products\" \r\n                            onChange={e => this.setValues(e, 'quantity') } />\r\n                        </div>\r\n                    </div>\r\n                </FormGroup>\r\n                <Button color=\"primary\" block onClick={this.create}> Gravar </Button>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\n\r\nclass ListProduct extends Component {\r\n\r\n    delete = (id) => {\r\n        this.props.deleteProduct(id);\r\n    }\r\n\r\n    onEdit = (product) => {\r\n        PubSub.publish('edit-product', product);\r\n    }\r\n\r\n    render() {\r\n        const { products } = this.props;\r\n        return (\r\n            <Table className=\"table-bordered text-center\">\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th>Descrição</th>\r\n                        <th>Preço</th>\r\n                        <th>Qtde.</th>\r\n                        <th>Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        products.map(product => (\r\n                            <tr key={product.id}>\r\n                                <td>{product.description}</td>\r\n                                <td>{product.price}</td>\r\n                                <td>{product.quantity}</td>\r\n                                <td>\r\n                                    <Button color=\"info\" size=\"sm\" onClick={e => this.onEdit(product)}>Editar</Button>\r\n                                    <Button color=\"danger\" size=\"sm\" onClick={e => this.delete(product.id)}>Deletar</Button>\r\n                                </td>\r\n                            </tr>\r\n                        ))\r\n                    }\r\n                </tbody>\r\n            </Table>\r\n        );\r\n    }   \r\n}\r\n\r\nexport default class ProductBox extends Component {\r\n\r\n    Url = 'http://localhost:9000/products';\r\n\r\n    state = {\r\n        products: [],\r\n        message: {\r\n            text: '',\r\n            alert: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(this.Url)\r\n            .then(response => response.json())\r\n            .then(products => this.setState({ products }))\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    save = (product) => {\r\n        let data = {\r\n            id: parseInt(product.id),\r\n            description: product.description,\r\n            price: parseFloat(product.price),\r\n            quantity: parseInt(product.quantity),\r\n        };\r\n        console.log(data);\r\n\r\n        const requestInfo = {\r\n            method: data.id !== 0? 'PUT': 'POST',\r\n            body: JSON.stringify(data),\r\n            headers: new Headers({\r\n                'Content-type': 'application/json'\r\n            })\r\n        };\r\n\r\n        if(data.id === 0) {\r\n            // CREATE NEW PRODUCT\r\n            fetch(this.Url, requestInfo)\r\n            .then(response => response.json())\r\n            .then(newProduct => {\r\n                let { products } = this.state;\r\n                products.push(newProduct);\r\n                this.setState({ products, message: { text: 'new product!', alert: 'success' } });\r\n                this.timerMessage(3000);\r\n            })\r\n            .catch(e => console.log(e)); \r\n        } else {\r\n            // EDIT PRODUCT\r\n            fetch(`${this.Url}/${data.id}`, requestInfo)\r\n            .then(response => response.json())\r\n            .then(updatedProduct => {\r\n                let { products } = this.state;\r\n                let position = products.findIndex(product => product.id === data.id);\r\n                products[position] = updatedProduct;\r\n                this.setState({ products, message: { text: 'Product success!', alert: 'info' } });\r\n                this.timerMessage(3000);\r\n            })\r\n            .catch(e => console.log(e)); \r\n        }\r\n    }\r\n\r\n    delete = (id) => {\r\n        fetch(`${this.Url}/${id}`, {method: 'DELETE'})\r\n            .then(response => response.json())\r\n            .then(rows => {\r\n                const products = this.state.products.filter(product => product.id !== id);\r\n                this.setState({ products,  message: { text: 'Product delete.', alert: 'danger' } });\r\n                this.timerMessage(3000);\r\n            })\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    timerMessage = (duration) => {\r\n        setTimeout(() => {\r\n            this.setState({ message: { text: '', alert: ''} });\r\n        }, duration);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {\r\n                    this.state.message.text !== ''? (\r\n                        <Alert color={this.state.message.alert} className=\"text-center\"> {this.state.message.text} </Alert>\r\n                    ) : ''\r\n                }\r\n\r\n                <div className=\"row\">\r\n    \r\n                    <div className=\"col-md-6 my-3\">\r\n                        <h2 className=\"font-weight-bold text-center\"> Cadastro de Produtos </h2>\r\n                        <FormProduct productCreate={this.save} />\r\n                    </div>\r\n                    <div className=\"col-md-6 my-3\">\r\n                        <h2 className=\"font-weight-bold text-center\"> Lista de Produtos </h2>\r\n                        <ListProduct products={this.state.products}  deleteProduct={this.delete} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}